IF NOT DEFINED VERCODE EXIT
CALL :%1 %2 %3 %4
EXIT /B 0

:SLOWDOWN <"Enemy": Integer> <"Amount": Integer>
SET /A AV.%1+=%2
:: Log the action
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%INPUTATK%!
ENDLOCAL&SET TMP.ENEMY=%TMP.ENEMY%
IF %2 LSS 100 (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD Enemy [4m%TMP.ENEMY%[24m ^(#%INPUTATK%^) has been %RGB.PURPLE%slowed down[1;37m by %RGB.RED%%2[1;37m points!
) ELSE CALL "%SCRIPTS_GAME%\logger.cmd" ADD Enemy [4m%TMP.ENEMY%[24m ^(#%INPUTATK%^) has been %RGB.PURPLE%stunned[0m[1m!%RGB.YELLOW%
EXIT /B 0

:POISON-CREATE <"Enemy/Player": Integer/String> <"Rounds": Integer> <"Power": Integer>
SET EFF.POISON.%1=%2
SET EFF.POISON.%1.POWER=%3
:: Log the action
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%INPUTATK%!
ENDLOCAL&SET TMP.ENEMY=%TMP.ENEMY%
IF NOT %1==PLAYER (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD You applied %RGB.LIME%poison[0m[1m to [4m%TMP.ENEMY%[24m ^(#%1^)!%RGB.YELLOW%[0m
) ELSE (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD You have been %RGB.LIME%poisoned[0m[1m for %2 rounds![24m[0m%RGB.YELLOW%[0m
)
EXIT /B 0
:POISON-EFFECT
FOR /F "TOKENS=3,4DELIMS=.=" %%1 IN ('SET EFF.POISON. 2^>NUL') DO (
	IF NOT %%2==POWER IF %%1==PLAYER (
	:: Poison for player
		SET /A EFF.POISON.%%1-=1
		CALL "%SCRIPTS_GAME%\logger.cmd" ADD You took %RGB.LIME%%%EFF.POISON.%%1.POWER%% poison[0m[1m damage!%RGB.YELLOW%[24m[24m
		SETLOCAL ENABLEDELAYEDEXPANSION
		IF %PLAYER.HP.NOW% LEQ 0 (
			ENDLOCAL
				SET PLAYER.HP.NOW=0
				SET EFF.POISON.%%1=
				SET EFF.POISON.%%1.POWER=
		) ELSE IF !EFF.POISON.%%1! LEQ 0 (
			ENDLOCAL
			SET /A PLAYER.HP.NOW-=EFF.POISON.%%1.POWER
			SET EFF.POISON.%%1=
			SET EFF.POISON.%%1.POWER=
		) ELSE (
			ENDLOCAL
			SET /A EFF.POISON.%%1-=1
			SET /A PLAYER.HP.NOW-=EFF.POISON.%%1.POWER
		)
		
		SETLOCAL ENABLEDELAYEDEXPANSION
		SET TMP.DMG=!EFF.POISON.%%1.POWER!
		ENDLOCAL&SET TMP.DMG=%TMP.DMG%
	) ELSE (
		:: Poison for any enemy
		SETLOCAL ENABLEDELAYEDEXPANSION
		IF NOT %%2==POWER IF NOT !ENEMY.HP.NOW.%%1! EQU 0 (
			ENDLOCAL
			SET /A "TMP.DMG=(((SKILL.ATK.BASE * SKILL.ATK) + EQUIP.BONUS_ATK + EFFECT.BONUS_ATK) *EFF.POISON.%%1.POWER) / 100"
			SET /A EFF.POISON.%%1-=1
			SET /A ENEMY.HP.NOW.%%1-=%TMP.DMG%

			:: Make sure that the enemy doesn't have less than 0 HP.
			SETLOCAL ENABLEDELAYEDEXPANSION
			SET /A ENEMY.HP.NOW.%%1=!ENEMY.HP.NOW.%%1! - %TMP.DMG%
			IF !ENEMY.HP.NOW.%%1! LEQ 0 (
				ENDLOCAL
				SET ENEMY.HP.NOW.%%1=0
				SET EFF.POISON.%%1=
			) ELSE IF !EFF.POISON.%%1! LEQ 0 (
				ENDLOCAL
				SET EFF.POISON.%%1=
			) ELSE ENDLOCAL
			
			:: Log the action
			SETLOCAL ENABLEDELAYEDEXPANSION
			SET TMP.ENEMY=!ENEMY.TYPE.%%1!
			ENDLOCAL&CALL SET TMP.ENEMY=%%TMP.ENEMY%%
			CALL "%SCRIPTS_GAME%\logger.cmd" ADD Enemy [4m%%TMP.ENEMY%%[0m[1m ^(#%%1^) took %RGB.LIME%%%TMP.DMG%% poison[0m[1m damage![0m[0m[0m[24m[24m
		) ELSE ENDLOCAL
	)
)
EXIT /B 0

:FIRE-CREATE <"Enemy/Player": Integer/String> <"Turns": Integer> <"Power": Integer>
SET EFF.FIRE.%1=%2
SET EFF.FIRE.%1.POWER=%3
:: Log the action
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%INPUTATK%!
ENDLOCAL&SET TMP.ENEMY=%TMP.ENEMY%
IF NOT %1==PLAYER (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD You applied %RGB.ORANGE%fire[0m[1m to [4m%TMP.ENEMY%[24m ^(#%1^)!%RGB.YELLOW%[0m
) ELSE (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD You are %RGB.ORANGE%on fire[0m[1m for %2 turns![24m[0m%RGB.YELLOW%[0m
)
EXIT /B 0
:FIRE-EFFECT
FOR /F "TOKENS=3,4DELIMS=.=" %%1 IN ('SET EFF.FIRE. 2^>NUL') DO (
	IF NOT %%2==POWER IF %%1==PLAYER (
	:: Fire action for player
		SET /A EFF.FIRE.%%1-=1
		CALL "%SCRIPTS_GAME%\logger.cmd" ADD You took %RGB.ORANGE%%%EFF.FIRE.%%1.POWER%% fire[0m[1m damage!%RGB.YELLOW%[24m[24m
		SETLOCAL ENABLEDELAYEDEXPANSION
		IF %PLAYER.HP.NOW% LEQ 0 (
			ENDLOCAL
				SET PLAYER.HP.NOW=0
				SET EFF.FIRE.%%1=
				SET EFF.FIRE.%%1.POWER=
		) ELSE IF !EFF.FIRE.%%1! LEQ 0 (
			ENDLOCAL
			SET /A PLAYER.HP.NOW-=EFF.FIRE.%%1.POWER
			SET EFF.FIRE.%%1=
			SET EFF.FIRE.%%1.POWER=
		) ELSE (
			ENDLOCAL
			SET /A EFF.FIRE.%%1-=1
			SET /A PLAYER.HP.NOW-=EFF.FIRE.%%1.POWER
		)
	) ELSE (
	:: Fire action for enemies
		SETLOCAL ENABLEDELAYEDEXPANSION
		IF NOT %%2==POWER IF NOT !ENEMY.HP.NOW.%%1! EQU 0 (
			ENDLOCAL
			SET /A "TMP.DMG=(((SKILL.ATK.BASE * SKILL.ATK) + EQUIP.BONUS_ATK + EFFECT.BONUS_ATK) *EFF.FIRE.%%1.POWER) / 100"
			SET /A EFF.FIRE.%%1-=1
			SET /A ENEMY.HP.NOW.%%1-=%TMP.DMG%
			
			:: Make sure that the enemy doesn't have less than 0 HP.
			SETLOCAL ENABLEDELAYEDEXPANSION
			TITLE !EFF.FIRE.%%1!
			SET /A ENEMY.HP.NOW.%%1=!ENEMY.HP.NOW.%%1! - %TMP.DMG%
			IF !ENEMY.HP.NOW.%%1! LEQ 0 (
				ENDLOCAL
				SET ENEMY.HP.NOW.%%1=0
				SET EFF.FIRE.%%1=
				SET EFF.FIRE.%%1.POWER=
			) ELSE IF !EFF.FIRE.%%1! LEQ 0 (
				ENDLOCAL
				SET EFF.FIRE.%%1=
				SET EFF.FIRE.%%1.POWER=
			) ELSE ENDLOCAL
			
			:: Log the action
			SETLOCAL ENABLEDELAYEDEXPANSION
			SET TMP.ENEMY=!ENEMY.TYPE.%%1!
			ENDLOCAL&CALL SET TMP.ENEMY=%%TMP.ENEMY%%
			CALL "%SCRIPTS_GAME%\logger.cmd" ADD Enemy [4m%%TMP.ENEMY%%[0m[1m ^(#%%1^) took %RGB.ORANGE%%%TMP.DMG%% fire[0m[1m damage!%RGB.YELLOW%
		) ELSE ENDLOCAL
	)
)
EXIT /B 0

:BLEED-CREATE <"Enemy/Player": Integer/String> <"Power": Integer>
SET EFF.BLEED.%1=TRUE
SET EFF.BLEED.%1.POWER=%2
:: Log the action
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%INPUTATK%!
ENDLOCAL&SET TMP.ENEMY=%TMP.ENEMY%
IF NOT %1==PLAYER (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD You applied %RGB.PINK%bleed[0m[1m to [4m%TMP.ENEMY%[24m ^(#%1^)!%RGB.YELLOW%[0m
) ELSE (
	CALL "%SCRIPTS_GAME%\logger.cmd" ADD You are %RGB.PINK%bleeding[0m[1m, heal yourself![24m[0m%RGB.YELLOW%[0m
)
EXIT /B 0
:BLEED-STOP-ALL
SET TMP=
FOR /F "TOKENS=3,4DELIMS=.=" %%1 IN ('SET EFF.BLEED. 2^>NUL') DO (
	SET EFF.BLEED.%%1=
	SET TMP=TRUE
)

:: Log the action
IF DEFINED TMP CALL "%SCRIPTS_GAME%\logger.cmd" ADD You are no longer %RGB.PINK%bleeding[0m[1m.[24m[0m%RGB.YELLOW%[0m

EXIT /B 0
:BLEED-EFFECT
FOR /F "TOKENS=3,4DELIMS=.=" %%1 IN ('SET EFF.BLEED. 2^>NUL') DO (
	IF NOT %%2==POWER IF %%1==PLAYER (
	:: BLEED action for player
		IF %PLAYER.HP.NOW% LEQ 0 (
			SET PLAYER.HP.NOW=0
			SET EFF.BLEED.%%1=
			SET EFF.BLEED.%%1.POWER=
		) ELSE (
			SET /A PLAYER.HP.NOW-=EFF.BLEED.%%1.POWER
		)
		CALL "%SCRIPTS_GAME%\logger.cmd" ADD You took %RGB.PINK%%%EFF.BLEED.%%1.POWER%% bleeding[0m[1m damage!%RGB.YELLOW%
	) ELSE (
	:: BLEED action for enemies
		SETLOCAL ENABLEDELAYEDEXPANSION
		IF NOT %%2==POWER IF NOT !ENEMY.HP.NOW.%%1! EQU 0 (
			ENDLOCAL
			SET /A "TMP.DMG=(((SKILL.ATK.BASE * SKILL.ATK) + EQUIP.BONUS_ATK + EFFECT.BONUS_ATK) *EFF.BLEED.%%1.POWER) / 100"
			SET /A ENEMY.HP.NOW.%%1-=%TMP.DMG%
			
			:: Make sure that the enemy doesn't have less than 0 HP.
			SETLOCAL ENABLEDELAYEDEXPANSION
			TITLE !EFF.BLEED.%%1!
			SET /A ENEMY.HP.NOW.%%1=!ENEMY.HP.NOW.%%1! - %TMP.DMG%
			IF !ENEMY.HP.NOW.%%1! LEQ 0 (
				ENDLOCAL
				SET ENEMY.HP.NOW.%%1=0
				SET EFF.BLEED.%%1=
				SET EFF.BLEED.%%1.POWER=
			) ELSE ENDLOCAL
			
			:: Log the action
			SETLOCAL ENABLEDELAYEDEXPANSION
			SET TMP.ENEMY=!ENEMY.TYPE.%%1!
			ENDLOCAL&CALL SET TMP.ENEMY=%%TMP.ENEMY%%
			CALL "%SCRIPTS_GAME%\logger.cmd" ADD Enemy [4m%%TMP.ENEMY%%[0m[1m ^(#%%1^) took %RGB.ORANGE%%%TMP.DMG%% bleed[0m[1m damage!%RGB.YELLOW%
		) ELSE ENDLOCAL
	)
)
EXIT /B 0