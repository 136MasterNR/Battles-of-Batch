IF NOT DEFINED VERCODE EXIT
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%1!
ENDLOCAL&SET TMP.ENEMY=%TMP.ENEMY%
CALL :%TMP.ENEMY% %1 || EXIT /B 0
EXIT /B 0






:Y <"Enemy ID": Integer>
IF %ENEMY_MISS%==TRUE EXIT /B 0

:: Extract the ATK values from the enemy
SETLOCAL ENABLEDELAYEDEXPANSION
FOR /F "TOKENS=1,2DELIMS=," %%A IN ("!ENEMY.ATK.AMOUNT.%1!") DO (
	ENDLOCAL
	SET /A "TMP.DMG=%random% %% %%A %%B"
)
SET /A "TMP.CHANCE=%random% %% 100"
SET /A "TMP.AMOUNT=%random% %% 1 +1"

IF DEFINED EFF.FIRE.PLAYER IF %TMP.AMOUNT% LEQ %EFF.FIRE.PLAYER.POWER% EXIT /B 0

IF %TMP.CHANCE% LEQ 20 CALL "%SCRIPTS_GAME%\acts\effect.cmd" FIRE-CREATE PLAYER %TMP.AMOUNT% %TMP.DMG%
EXIT /B 0






:N
SET /A TMP.RND=%random% %% 4 +1
IF %TMP.RND% LEQ 3 (
	SET LET_ENEMY_ATK=FALSE
) ELSE EXIT /B 0

:: Check if at least one enemy is alive, except itself.
SETLOCAL ENABLEDELAYEDEXPANSION
FOR /L %%I IN (1, 1, %EN.MAX%) DO (
	IF /I NOT !ENEMY.TYPE.%%I!==N IF !ENEMY.HP.NOW.%%I! GTR 0 (
		ENDLOCAL
		GOTO N-RE
	)
)

ENDLOCAL
SET AV.%1+=10
SET LET_ENEMY_ATK=TRUE
EXIT /B 0

:N-RE
SET /A TMP.RND=%random% %% %EN.MAX% +1
IF %TMP.RND%==%1 GOTO N-RE
SETLOCAL ENABLEDELAYEDEXPANSION
IF !ENEMY.HP.NOW.%TMP.RND%! LEQ 0 (
	ENDLOCAL
	GOTO N-RE
)
IF /I !ENEMY.TYPE.%TMP.RND%!==N (
	ENDLOCAL
	GOTO N-RE
)
ENDLOCAL
SET /A AV.%TMP.RND%-=AV.%TMP.RND%

:: Log the action
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%TMP.RND%!
ENDLOCAL&SET TMP.ENEMY2=%TMP.ENEMY%
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ENEMY=!ENEMY.TYPE.%1!
ENDLOCAL&SET TMP.ENEMY=%TMP.ENEMY%
CALL "%SCRIPTS_GAME%\logger.cmd" ADD Enemy [4m%TMP.ENEMY%[24m ^(#%1^) has %RGB.CYAN%advanced forward[0m[1m enemy [4m%TMP.ENEMY2%[24m ^(#%TMP.RND%^)!%RGB.YELLOW%
EXIT /B 0






:F
IF %ENEMY_MISS%==TRUE EXIT /B 0

SET /A TMP.DMG=ENEMY.LVL.%1 * 2

SET /A TMP.RND=%random% %% 4 +1
IF %TMP.RND% LEQ 3 (
	CALL "%SCRIPTS_GAME%\acts\effect.cmd" BLEED-CREATE PLAYER %TMP.DMG%
)
EXIT /B 0






:S
IF %ENEMY_MISS%==TRUE EXIT /B 0

:: Extract the ATK values from the enemy
SETLOCAL ENABLEDELAYEDEXPANSION
FOR /F "TOKENS=1,2DELIMS=," %%A IN ("!ENEMY.ATK.AMOUNT.%1!") DO (
	ENDLOCAL
	SET /A "TMP.DMG=(%random% %% %%A %%B)*3"
)

IF DEFINED EFF.POISON.PLAYER IF %TMP.DMG% LEQ %EFF.POISON.PLAYER.POWER% EXIT /B 0

CALL "%SCRIPTS_GAME%\acts\effect.cmd" POISON-CREATE PLAYER 3 %TMP.DMG%
EXIT /B 0






:Goblin
IF %ENEMY_MISS%==TRUE EXIT /B 0

:: Extract the ATK values from the enemy
SETLOCAL ENABLEDELAYEDEXPANSION
FOR /F "TOKENS=1,2DELIMS=," %%A IN ("!ENEMY.ATK.AMOUNT.%1!") DO (
	ENDLOCAL
	SET /A "TMP.DMG=%random% %% %%A %%B"
)
CALL "%SCRIPTS_GAME%\acts\effect.cmd" FIRE-CREATE PLAYER 6 %TMP.DMG%
EXIT /B 0



