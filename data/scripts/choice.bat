SETLOCAL ENABLEDELAYEDEXPANSION
SET "KEY="
IF "%1."=="/WAIT." START "CHOICE_AUTO_SKIP" /MIN CMD /C TIMEOUT /T %2^&TASKKILL /IM xcopy.exe /F
FOR /F "DELIMS=" %%A IN ('XCOPY /W "!COMSPEC!" "!COMSPEC!" 2^>NUL') DO (
    IF NOT DEFINED KEY SET "KEY=%%A^!"
)
TASKKILL /FI "WINDOWTITLE eq CHOICE_AUTO_SKIP*" /IM cmd.exe 1>NUL
IF !KEY:~-1!==^^ (
    SET "KEY=^"
) ELSE SET "KEY=!KEY:~-2,1!"
IF NOT DEFINED KEY SET KEY=r
IF "!KEY!."==")." SET KEY=EXT_
SET ERRORLEVEL=!KEY!
IF EXIST LET.DEBUG ECHO.!KEY!>>LOG.txt
ENDLOCAL&SET CHOICE.INPUT=%ERRORLEVEL%
EXIT /B