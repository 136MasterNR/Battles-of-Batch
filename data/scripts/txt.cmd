GOTO :%1





:TYPE [/A: Auto Next Line] <"Text": string>
ECHO.[s
SET TMP.ARG=%*
SET TMP.ARG=%TMP.ARG:~5%
IF /I "%TMP.ARG:~0,2%"=="/A" (
	SET TMP.ARG=%TMP.ARG:~3%
	SET TMP.I_LINE=0
) ELSE SET TMP.I_LINE=
SET TMP.I=0

:TYPE-RE
CALL SET TMP.OUT=%%TMP.ARG:~%TMP.I%,1%%
(
	IF %TMP.OUT%.==. (SET /P "=[u [s") ELSE SET /P "=[u%TMP.OUT:`="%[s"
) <NUL
IF DEFINED TMP.I_LINE IF "%TMP.I_LINE%"=="116" (
	ECHO.
	ECHO.[s
	SET TMP.I_LINE=-1
)

IF DEFINED TMP.OUT (
	IF DEFINED TMP.I_LINE SET /A TMP.I_LINE+=1
	SET /A TMP.I+=1
	CALL "%WAIT%" 10
	GOTO :TYPE-RE
)
TIMEOUT /T 2 >NUL
EXIT /B 0





:FADE-IN
SET TMP.I_ALL=0
SET TMP.RGB=0
SET /P "=[s" <NUL
SHIFT

:RENDER_RE
CALL :RENDER_RE-CALL %*
EXIT /B 0

:RENDER_RE-CALL
SHIFT
SET /A TMP.I_ALL+=1
SET /A TMP.RGB+=17
SET TMP.I=0
SET TMP.I_POS=0

:RENDER_NEXT
IF %TMP.I% LEQ 8 (
	SET /A TMP.I+=1
	SET /A TMP.I_POS+=1
) ELSE (
	SET /A TMP.I_POS+=1
	SHIFT
)
SET TMP.ARG=hADE-IN
CALL SET TMP.ARG=%%%TMP.I%
IF DEFINED TMP.ARG (
	CALL :TEXT_FX %TMP.ARG%
	GOTO :RENDER_NEXT
)
IF %TMP.I_ALL% LEQ 14 GOTO :RENDER_RE
@EXIT /B 0


:FADE-OUT
SET TMP.I_ALL=0
SET TMP.RGB=255
SET /P "=[s" <NUL

:FADE_OUT_RENDER_RE
CALL :FADE_OUT_RENDER_RE-CALL %*
EXIT /B 0

:FADE_OUT_RENDER_RE-CALL
SHIFT
SET /A TMP.I_ALL+=1
SET /A TMP.RGB-=16
SET TMP.I=0
SET TMP.I_POS=0

:FADE_OUT_RENDER_NEXT
IF %TMP.I% LEQ 8 (
	SET /A TMP.I+=1
	SET /A TMP.I_POS+=1
) ELSE (
	SET /A TMP.I_POS+=1
	SHIFT
)
SET TMP.ARG=
CALL SET TMP.ARG=%%%TMP.I%
IF DEFINED TMP.ARG (
	CALL :TEXT_FX %TMP.ARG%
	GOTO :FADE_OUT_RENDER_NEXT
)
IF %TMP.I_ALL% LEQ 14 (
	GOTO :FADE_OUT_RENDER_RE
)
@EXIT /B 0


:TEXT_FX
SET TMP.ARG=%TMP.ARG:"=%
SETLOCAL ENABLEDELAYEDEXPANSION
SET TMP.ARG=!TMP.ARG:$_PERC=%%!
ENDLOCAL&SET TMP.ARG=%TMP.ARG%
SET /P "=[u[%TMP.I_POS%B[2A%RGB%%TMP.RGB%;%TMP.RGB%;%TMP.RGB%m%TMP.ARG%" <NUL
CALL "%WAIT%" 0
IF %TMP.I_ALL% EQU 15 ECHO.[u[%TMP.I_POS%B[2A
EXIT /B 0
